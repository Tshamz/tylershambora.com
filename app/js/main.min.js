$(document).ready(function(){function a(){var a=$(this);return $("#sender-name").val()&&$("#sender-email").val()&&$("#sender-message").val()?$.ajax({url:a.attr("action")+"?ajax=true",type:a.attr("method"),data:a.serialize(),success:b}):$(".status-message, .incomplete-message").fadeIn().delay(f).fadeOut(),!1}function b(a){a=$.trim(a),"success"===a?($(".status-message, .success-message").fadeIn().delay(f).fadeOut(),$("#sender-name").val(""),$("#sender-email").val(""),$("#sender-message").val(""),sessionStorage.clear()):$(".status-message, .failure-message").fadeIn().delay(f).fadeOut()}yepnope({load:"js/feature-test.min.js"});var c,d="",e={},f=2e3,g=600,h=200,j=$("#guts"),k=["papn","csh","fb","sns","petershambora","wtfdrink","laura","resizely","cpsolutions"];$.when($.get("injectedHtml.html",function(a){c=$(a)}),$.getJSON("/js/galleryInfos.json",function(a){d=a})).then(function(){l()});var l=function(){var a=window.location.hash.substring(1);""===a&&(a="entrance"),$("#main-header ."+a).addClass("is-active"),$("#main-header ."+a+" a").attr("disabled","disabled"),m(a,function(){j.toggleClass("slideUp slideDown"),setTimeout(function(){$(".content").toggleClass("fadeOut fadeIn")},g)})},m=function(a,b){j.children("section").remove();var d=a;switch(d){case"resume":case"papn":case"csh":case"fb":case"sns":case"petershambora":case"wtfdrink":case"laura":case"resizely":case"cpsolutions":n(d);break;case"contact":p();default:j.prepend(c.closest("#"+d))}b&&b()},n=function(a){if(a in e)return void j.prepend(e[a]);var b=d[a].galleryStatus,c='<svg xmlns="http://www.w3.org/2000/svg" width="88" height="18"><linearGradient id="a" x2="0" y2="100%"><stop offset="0" stop-color="#fff" stop-opacity=".7"/><stop offset=".1" stop-color="#aaa" stop-opacity=".1"/><stop offset=".9" stop-opacity=".3"/><stop offset="1" stop-opacity=".5"/></linearGradient><rect rx="4" width="88" height="18" fill="#555"/><rect rx="4" x="44" width="44" height="18" fill="#4c1"/><path fill="#4c1" d="M44 0h4v18h-4z"/><rect rx="4" width="88" height="18" fill="url(#a)"/><g fill="#fff" text-anchor="middle" font-family="DejaVu Sans,Verdana,Geneva,sans-serif" font-size="11"><text x="23" y="13" fill="#010101" fill-opacity=".3">status</text><text x="23" y="12">status</text><text x="65" y="13" fill="#010101" fill-opacity=".3">online</text><text x="65" y="12">online</text></g></svg>',f='<svg xmlns="http://www.w3.org/2000/svg" width="89" height="18"><linearGradient id="a" x2="0" y2="100%"><stop offset="0" stop-color="#fff" stop-opacity=".7"/><stop offset=".1" stop-color="#aaa" stop-opacity=".1"/><stop offset=".9" stop-opacity=".3"/><stop offset="1" stop-opacity=".5"/></linearGradient><rect rx="4" width="89" height="18" fill="#555"/><rect rx="4" x="44" width="45" height="18" fill="#e05d44"/><path fill="#e05d44" d="M44 0h4v18h-4z"/><rect rx="4" width="89" height="18" fill="url(#a)"/><g fill="#fff" text-anchor="middle" font-family="DejaVu Sans,Verdana,Geneva,sans-serif" font-size="11"><text x="23" y="13" fill="#010101" fill-opacity=".3">status</text><text x="23" y="12">status</text><text x="65.5" y="13" fill="#010101" fill-opacity=".3">offline</text><text x="65.5" y="12">offline</text></g></svg>',g='<svg xmlns="http://www.w3.org/2000/svg" width="99" height="18"><linearGradient id="a" x2="0" y2="100%"><stop offset="0" stop-color="#fff" stop-opacity=".7"/><stop offset=".1" stop-color="#aaa" stop-opacity=".1"/><stop offset=".9" stop-opacity=".3"/><stop offset="1" stop-opacity=".5"/></linearGradient><rect rx="4" width="99" height="18" fill="#555"/><rect rx="4" x="44" width="55" height="18" fill="#dfb317"/><path fill="#dfb317" d="M44 0h4v18h-4z"/><rect rx="4" width="99" height="18" fill="url(#a)"/><g fill="#fff" text-anchor="middle" font-family="DejaVu Sans,Verdana,Geneva,sans-serif" font-size="11"><text x="23" y="13" fill="#010101" fill-opacity=".3">status</text><text x="23" y="12">status</text><text x="70.5" y="13" fill="#010101" fill-opacity=".3">'+b+'</text><text x="70.5" y="12">'+b+"</text></g></svg>",h=d[a].galleryTitle,k=d[a].galleryDescription,l=d[a].marqueeImage,m=d[a].galleryURL,n=d[a].galleryURLAppearance,o="";"online"===b?(l='<a href="'+m+'" target="_blank"><img src="'+l+'" /></a>',o=c,m='<p><strong><a href="'+m+'" target="_blank">'+n+"</a></strong></p>"):"offline"===b?(l='<img src="'+l+'" />',o=f,m=""):(l='<img src="'+l+'" />',o=g,m="");var p="";p+=d[a].subGallery?'<section id="'+a+'" class="fadeOut content sub gallery">':'<section id="'+a+'" class="fadeOut content gallery">',p+="<nav>",p+='<div class="gallery-control previous"></div>',p+='<div class="gallery-control next"></div>',p+="</nav>",p+='<div class="slide" style="left:0%;">',p+='<div class="gallery-panel marquee">',p+='<div class="marquee-image">',p+=l,p+="</div>",p+='<div class="gallery-title">',p+='<h2 class="hyphenate">'+h+"</h2>",p+="</div>",p+='<div class="gallery-url">',p+=m,p+="</div>",p+='<div class="gallery-status">',p+=o,p+="</div>",p+='<div class="gallery-description">',p+="<p>"+k+"</p>",p+="</div>",p+="</div>",p+="</div>";var q=d[a].additionalGalleries,r="";for(i=0;i<q.length;i++){var s=q[i],t=s[0],u=s[1],v=s[2],w=s[3],x=i+1;r+='<div class="slide" style="left:'+x+'00%;">',r+='<div class="gallery-panel repeat '+u+'">',r+='<div class="gallery-image"><img src="img/sites/'+v+'" lightbox="'+t+'" /></div>',r+='<div class="gallery-text"><p>'+w+"</p></div>",r+="</div>",r+="</div>"}var y=p+r+"</section>";e[a]=y,j.prepend(y),$(".gallery .slide:first-of-type").addClass("first"),$(".gallery .slide:last-of-type").addClass("last"),$(".previous").addClass("is-disabled"),j.on("click",'.gallery img[lightbox="true"]',function(){var a=$(this).attr("src");$("#lightbox-image").attr("src",a),$("#lightbox").show()}),$("#lightbox-image").click(function(a){a.stopPropagation()}),$("#lightbox").click(function(){$("#lightbox").hide()}),$(".gallery-panel.resume img").click(function(){window.open("/resume.pdf","Tyler Shambora's Resume")})},o=!1;j.on("click",".previous",function(){return"0px"===$(".first").css("left")?!1:o===!0?!1:(o=!0,$(".gallery .slide").animate({left:"+=100%"},750,function(){o=!1,"0px"===$(".first").css("left")&&$(".previous").addClass("is-disabled")}),void($(".next").hasClass("is-disabled")&&$(".next").removeClass("is-disabled")))}),j.on("click",".next",function(){return"0px"===$(".last").css("left")?!1:o===!0?!1:(o=!0,$(".gallery .slide").animate({left:"-=100%"},750,function(){o=!1,"0px"===$(".last").css("left")&&$(".next").addClass("is-disabled")}),void($(".previous").hasClass("is-disabled")&&$(".previous").removeClass("is-disabled")))}),$(".nav-toggle").click(function(){$("#main-header .nav-item:not(.logo)").toggle()}),$("#main-header a").click(function(){$(".nav-toggle").is(":visible")&&$("#main-header .nav-item:not(.logo)").hide()}),$("#main-header .nav-item a").on("click",function(){$("#main-header .nav-item").removeClass("is-active"),$("#main-header a").removeAttr("disabled"),$(this).is("#main-header .nav-item a")&&($(this).parent().addClass("is-active"),$(this).find("a").attr("disabled","disabled"))}),sessionStorage.wtfdrinkPermission!==!0&&j.on("click",".portfolio-item.wtfdrink a",function(a){$("#wtf-overlay").show(),a.preventDefault()}),$("#no-way").click(function(){sessionStorage.setItem("wtfdrinkPermission",!1),$("#wtf-overlay").hide()}),$("#yes-way").click(function(){sessionStorage.setItem("wtfdrinkPermission",!0),$("#wtf-overlay").hide(),window.location.hash="wtfdrink",j.off("click",".portfolio-item.wtfdrink a")}),$(window).on("hashchange",function(){ga("Navigation","Click","hashchange");var a=window.location.hash.substring(1);$.inArray(a,k)>=0?($("#main-header .nav-item").removeClass("is-active"),$("#main-header a").removeAttr("disabled"),$("#portfolio").toggleClass("fadeIn fadeOut"),setTimeout(function(){m(a,function(){$(".content").toggleClass("fadeIn fadeOut"),$("html, body").animate({scrollTop:0},400),ga("Navigation","Event","#"+a),ga("Navigation","Event","Portfolio => Sub-Gallery")})},h)):$(".content").hasClass("sub")&&"portfolio"===a?($(".content").toggleClass("fadeIn fadeOut"),setTimeout(function(){m(a,function(){$(".content").toggleClass("fadeIn fadeOut"),$("html, body").animate({scrollTop:0},400),ga("Navigation","Event","#"+a),ga("Navigation","Event","Portfolio <= Sub-Gallery")})},h)):($(".content").toggleClass("fadeIn fadeOut"),setTimeout(function(){j.toggleClass("slideDown slideUp")},h),setTimeout(function(){m(a,function(){j.toggleClass("slideUp slideDown"),setTimeout(function(){$(".content").toggleClass("fadeOut fadeIn"),$("html, body").animate({scrollTop:0},400),ga("Navigation","Event","#"+a),ga("Navigation","Event","Generic Navigation")},g)})},h+g))}),j.on("keyup",".stored",function(){var a=this.id;sessionStorage.setItem(a,this.value)});var p=function(){for(var a=0;a<sessionStorage.length;a++){var b=sessionStorage.getItem(sessionStorage.key(a));$("#"+sessionStorage.key(a)).val(b)}};j.on("submit","#contact-form",a)});